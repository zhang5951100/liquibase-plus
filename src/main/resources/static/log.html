<!DOCTYPE html>
<html lang="en">
<head>
    <title>Liquibase Plus</title>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <link rel="icon" type="image/x-icon" href="../favicon.ico"/>
    <link href="semantic/dist/semantic.min.css" rel="stylesheet"/>
    <link href="plugins/ionicons/css/ionicons.min.css" rel="stylesheet"/>
    <link href="css/main.css" rel="stylesheet"/>
    <link href="plugins/pacejs/pace.css" rel="stylesheet"/>
</head>
<body>
<div id="contextWrap">
    <!--sidebar-->
    <div class="ui sidebar vertical left menu overlay  borderless visible sidemenu inverted  grey"
         style="-webkit-transition-duration: 0.1s; transition-duration: 0.1s;" data-color="grey">
        <a class="item logo" href="index.html">
            <img src="img/logo.png" alt="stagblogo"/><img src="img/thumblogo.png" alt="stagblogo" class="displaynone"/>
        </a>
        <div class="ui accordion inverted">
            <div class="title item">
                <i class="home titleIcon icon"></i>
                <i class="dropdown icon"></i> 主页
            </div>
            <div class="content">
                <a class="item" href="index.html">
                    Index
                </a>
            </div>
            <div class="title item">
                <i class="list layout titleIcon icon"></i>
                <i class="dropdown icon"></i> 配置详情
            </div>
            <div class="content">
                <a class="item" href="detail.html">
                    Detail
                </a>
            </div>
            <div class="title item">
                <i class="ion-paintbrush titleIcon icon"></i>
                <i class="dropdown icon"></i> 日志
            </div>
            <div class="content">
                <a class="item" href="log.html">
                    Log
                </a>
            </div>
        </div>

        <div class="ui dropdown item displaynone scrolling">
            <span>主页</span>
            <i class="home icon"></i>
            <div class="menu">
                <div class="header">
                    主页
                </div>
                <div class="ui divider"></div>
                <a class="item" href="index.html">
                    Index
                </a>
            </div>
        </div>
        <div class="ui dropdown item displaynone scrolling">
            <span>配置详情</span>
            <i class="list layout  icon"></i>
            <div class="menu">
                <div class="header">
                    配置详情
                </div>
                <div class="ui divider"></div>
                <a class="item" href="detail.html">
                    Detail
                </a>
            </div>
        </div>
        <div class="ui dropdown item displaynone scrolling">
            <span>日志</span>
            <i class="ion-paintbrush  icon"></i>
            <div class="menu">
                <div class="header">
                    日志列表
                </div>
                <div class="ui divider"></div>
                <a class="item" href="log.html">
                    Log
                </a>
            </div>
        </div>
    </div>
    <!--sidebar-->
    <div class="ui right sidebar">
        <div style="text-align: center;padding: 25px">

            <h5 class="ui header">导航栏颜色</h5>

            <div>

                <ul class="colorlist">
                    <li>
                        <a class="ui segment yellow inverted" data-addClass="inverted yellow">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment red inverted" data-addClass="inverted red">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment blue inverted" data-addClass="inverted blue">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment black inverted" data-addClass="inverted black">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment orange inverted" data-addClass="inverted orange">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment pink inverted" data-addClass="inverted pink">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment green inverted" data-addClass="inverted green">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment purple inverted" data-addClass="inverted purple">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment violet inverted" data-addClass="inverted violet">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment brown inverted" data-addClass="inverted brown">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment teal inverted" data-addClass="inverted teal">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment greenli inverted" data-addClass="inverted greenli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment grey inverted" data-addClass="inverted grey">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment redli inverted" data-addClass="inverted redli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment yellowli inverted" data-addClass="inverted yellowli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment blueli inverted" data-addClass="inverted blueli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment darkpurpleli inverted" data-addClass="inverted darkpurpleli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment darkorangeli inverted" data-addClass="inverted darkorangeli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment greenli2 inverted" data-addClass="inverted greenli2">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment pinkli inverted" data-addClass="inverted pinkli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment lightyellowli inverted" data-addClass="inverted lightyellowli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment darkli inverted" data-addClass="inverted darkli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment lightbrownli inverted" data-addClass="inverted lightbrownli">
                        </a>
                    </li>
                </ul>
            </div>

            <h5 class="ui header">侧边栏</h5>
            <div>

                <ul class="sidecolor">
                    <li>
                        <a class="ui segment yellow inverted" data-addClass="inverted yellow">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment red inverted" data-addClass="inverted red">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment blue inverted" data-addClass="inverted blue">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment black inverted" data-addClass="inverted black">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment orange inverted" data-addClass="inverted orange">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment pink inverted" data-addClass="inverted pink">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment green inverted" data-addClass="inverted green">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment purple inverted" data-addClass="inverted purple">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment violet inverted" data-addClass="inverted violet">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment brown inverted" data-addClass="inverted brown">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment teal inverted" data-addClass="inverted teal">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment greenli inverted" data-addClass="inverted greenli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment grey inverted" data-addClass="inverted grey">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment redli inverted" data-addClass="inverted redli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment yellowli inverted" data-addClass="inverted yellowli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment blueli inverted" data-addClass="inverted blueli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment darkpurpleli inverted" data-addClass="inverted darkpurpleli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment darkorangeli inverted" data-addClass="inverted darkorangeli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment greenli2 inverted" data-addClass="inverted greenli2">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment pinkli inverted" data-addClass="inverted pinkli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment lightyellowli inverted" data-addClass="inverted lightyellowli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment darkli inverted" data-addClass="inverted darkli">
                        </a>
                    </li>
                    <li>
                        <a class="ui segment lightbrownli inverted" data-addClass="inverted lightbrownli">
                        </a>
                    </li>
                </ul>
            </div>

        </div>


    </div>
    <div class="pusher">
        <!--navbar-->
        <div class="navslide navwrap">
            <div class="ui menu icon borderless grid" data-color="inverted white">
                <a class="item labeled openbtn">
                    <i class="ion-navicon-round big icon"></i>
                </a>
                <a class="item labeled expandit" onclick="toggleFullScreen(document.body)">
                    <i class="ion-arrow-expand big icon"></i>
                </a>

                <div class="right menu colhidden">


                    <a class="item labeled rightsidebar computer only">
                        <i class="ion-wrench large icon"></i>
                    </a>

                </div>
            </div>
        </div>

        <div class="mainWrap navslide">

            <div class="ui equal width left aligned padded grid stackable">
                <div style="padding: 10px">
                    <div class="row">
                        <div class="sixteen wide tablet sixteen wide computer column">
                            <div class="ui segments" style="width: 1300px;">
                                <div class="ui segment">
                                    <h3 class="ui header">
                                        Changelog 日志详情
                                    </h3>
                                </div>

                                <div class="ui segment">
                                    <div id="log">

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--jquery-->
<script src="js/jquery-2.1.4.min.js"></script>
<!--jquery-->
<!--semantic-->
<script src="semantic/dist/semantic.min.js"></script>
<!--semantic-->
<script src="plugins/cookie/js.cookie.js"></script>
<script src="plugins/nicescrool/jquery.nicescroll.min.js"></script>

<script data-pace-options='{ "ajax": false }' src="plugins/pacejs/pace.js"></script>
<script src="js/customjs/custom-validation.js"></script>
<script src="js/main.js"></script>

<script>
    $(function () {
        $.ajax({
            url: "/command/changeLog",
            type: "get",
            dataType: "json",
            success: function (data) {
                showData(data);
            },
            error: function (msg) {
                alert("数据异常!");
            }
        });
    });

    //展示数据
    function showData(data) {
        var i = 0;
        data.changeSetList.forEach(function (item, index) {
            i++;
            document.getElementById("log").innerHTML = $("#log").html()
                + '<div class="title"><h4>' + 'ID:' + item.id + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Author:' + item.author + '</h4></div>';
            if (item.tagDatabase != null) {
                document.getElementById("log").innerHTML = $("#log").html()
                    + '<div class="content"><p>TagDatabase</p><table class="ui compact selectable striped celled table tablet stackable" cellspacing="0" width="100%">' +
                    '<thead><tr><th>Tag</th></tr></thead>' +
                    '<tbody><tr><td>' + item.tagDatabase.tag + '</td></tr></tbody></table></div>'
            }
            if (item.createTable != null) {
                document.getElementById("log").innerHTML = $("#log").html()
                    + '<div class="content"><span>CreateTable -- </span><span style="background-color: #6bbbad">' + item.createTable.tableName + '</span><table id="data_table' + i + '" class="ui compact selectable striped celled table tablet stackable" cellspacing="0" width="100%">' +
                    '<thead><tr><th style="width: 50%;">Column</th><th>Type</th></tr></thead>' +
                    '<tbody>'
                if (item.createTable.columnList != null) {
                    item.createTable.columnList.forEach(function (column, index) {
                        document.getElementById("data_table" + i).innerHTML = $("#data_table" + i).html() +
                            '<tr><td>' + column.name + '</td><td>' + column.type + '</td></tr>'
                    })

                }
                document.getElementById("log").innerHTML = $("#log").html() + '</tbody></table></div>'
            }

            if (item.addUniqueConstraint != null) {
                document.getElementById("log").innerHTML = $("#log").html()
                    + '<div class="content"><p>AddUniqueConstraint</p><table class="ui compact selectable striped celled table tablet stackable" cellspacing="0" width="100%">' +
                    '<thead><tr><th style="width: 33%;">ColumnNames</th><th style="width: 33%;">ConstraintName</th><th>TableName</th></tr></thead>' +
                    '<tbody><tr><td>' + item.addUniqueConstraint.columnNames + '</td><td>' + item.addUniqueConstraint.constraintName + '</td><td>' + item.addUniqueConstraint.tableName + '</td></tr></tbody></table></div>'
            }

            if (item.createIndex != null) {
                document.getElementById("log").innerHTML = $("#log").html()
                    + '<div class="content"><p>CreateIndex</p><table class="ui compact selectable striped celled table tablet stackable" cellspacing="0" width="100%">' +
                    '<thead><tr><th style="width: 33%;">IndexName</th><th style="width: 33%;">TableName</th></tr></thead>' +
                    '<tbody><tr><td>' + item.createIndex.indexName + '</td><td>' + item.createIndex.tableName + '</td></tr></tbody></table></div>'
            }

            if (item.addForeignKeyConstraint != null) {
                document.getElementById("log").innerHTML = $("#log").html()
                    + '<div class="content"><p>AddForeignKeyConstraint</p><table class="ui compact selectable striped celled table tablet stackable" cellspacing="0" width="100%">' +
                    '<thead><tr><th>BaseColumnNames</th><th>BaseTableName</th><th>ConstraintName</th><th>Deferrable</th><th>InitiallyDeferred</th><th>OnDelete</th><th>OnUpdate</th><th>ReferencedColumnNames</th><th>ReferencedTableName</th><th>Validate</th></tr></thead>' +
                    '<tbody><tr><td>' + item.addForeignKeyConstraint.baseColumnNames + '</td><td>' + item.addForeignKeyConstraint.baseTableName + '</td><td>' + item.addForeignKeyConstraint.constraintName + '</td><td>' + item.addForeignKeyConstraint.deferrable + '</td><td>' + item.addForeignKeyConstraint.initiallyDeferred + '</td><td>' + item.addForeignKeyConstraint.onDelete + '</td><td>' + item.addForeignKeyConstraint.onUpdate + '</td><td>' + item.addForeignKeyConstraint.referencedColumnNames + '</td><td>' + item.addForeignKeyConstraint.referencedTableName + '</td><td>' + item.addForeignKeyConstraint.validate + '</td></tr></tbody></table></div>'
            }

        })
    }

</script>
</body>
</html>
